function getCookie(e){e=("; "+document.cookie).split(`; ${e}=`);if(2===e.length)return e.pop().split(";").shift()}async function check(){var e=getCookie("token");e?1==(e=await(await fetch("/api/setup",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})})).json()).success&&"/setup"==window.location.pathname?document.getElementById("overlay").classList.add("hidden"):1==e.success&&"/setup"!==window.location.pathname||"/setup"!==window.location.pathname&&(window.location.href="/setup"):"/setup"!==window.location.pathname&&(window.location.href="/setup")}async function auth(){var e,t=document.getElementById("token").value,o=await(await fetch("/api/setup",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t})})).json();1==o.success?(toastr.success(o.message,"Success!"),(e=new Date).setTime(e.getTime()+36e5),document.cookie=`token=${t}; expires=${e.toUTCString()}; path=/`,document.getElementById("overlay").classList.add("hidden")):toastr.error(o.message,"Error!")}function gv(e){return document.getElementById(e).value}async function submit(){var e=gv("domain"),t=gv("app"),o=gv("acc"),n=gv("fees")??0;if(!e||!t||!o)return toastr.error("Missing values!");e=await(await fetch("/api/setup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:getCookie("token"),domain:e,app:t,acc:o,fees:n})})).json();1==e.success?(toastr.success("Success!"),window.location.href="/setup/finish"):toastr.error(e.message,"Error!")}check();